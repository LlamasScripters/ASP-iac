#!/bin/bash

# Script pour dÃ©clencher un backup manuel
# Utilise le conteneur de backup existant

set -e

echo "ğŸš€ Triggering manual backup..."

# VÃ©rifier que le conteneur existe
if ! docker ps --format "table {{.Names}}" | grep -q "asphub_backup"; then
    echo "âŒ Backup container not found. Is the backup stack deployed?"
    exit 1
fi

# ExÃ©cuter le script de backup dans le conteneur
echo "ğŸ“¦ Running backup script in container..."
docker exec asphub_backup /backup-script.sh

echo "âœ… Manual backup completed!"
echo "ğŸ“Š Check logs: docker logs asphub_backup"
echo "ğŸ“ Check status: /opt/backup/scripts/backup-status.sh"